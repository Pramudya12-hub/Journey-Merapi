<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kontak</title> <!--Judul page-->
    <link rel="stylesheet" href="style.css"> <!--mengarah ke style css-->
</head>
<body>
    <header class="header"> <!--membuat class header-->
        <a href="index.html" class="Logo">Contact<span>GM</span></a> <!--Logo mengarah ke index-->
        <nav class="navbar">
            <ul>
                <li><a href="index.html">Beranda</a></li>
                <li><a href="about.html">Tentang Merapi</a></li>
                <li><a href="contact.html" class="active">Kontak</a></li>
            </ul>
        </nav>
        <div class="nav-actions">
            <span id="userName" style="display: none; margin-right: 10px;"></span> 
            <button class="login-btn" id="openLogin">Login</button> 
            <button class="logout-btn" id="logoutBtn" style="display: none;">Logout</button>
            <button class="mode-toggle-btn" id="darkModeToggle">Dark Mode</button>
        </div>
    </header>

    <div id="loginModal" class="login-modal">
        <div class="login-modal-content">
            <span class="close-login">&times;</span>
            <h2>Login Pengguna</h2>
            <form id="loginForm" onsubmit="login(event)">
                <input type="text" id="email" placeholder="Email" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit" class="login-submit">Masuk</button>
            </form>
        </div>
    </div>
    
    <section class="kontak-section" style="margin-top: 100px;">  <!--membuat section kontak-->
        <h1>Kontak <span>Kami</span></h1> <!--judul kontak-->
        <p>
            Jika Anda ingin bertanya seputar informasi Gunung Merapi atau ingin memberikan kritik dan saran, 
            silakan hubungi kami melalui formulir di bawah ini.
        </p>
        
        <div class="contact-card">
            <form class="contact-form" id="contactForm">
                <label for="name">Nama:</label>
                <input type="text" id="name" name="name" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="message">Pesan:</label>
                <textarea id="message" name="message" rows="4" required></textarea>

                <button type="submit">Kirim</button>
            </form>
        </div>
        </section>

    <footer class="footer-merapi">
        <div class="footer-container">
            <div class="footer-column">
                <h3>MerapiWeb</h3>
                <p>
                    Media informasi dan wisata Gunung Merapi.<br>
                    Menyajikan edukasi, sejarah, dan pesona alam Indonesia.
                </p>
                <p class="copyright">&copy; 2025 MerapiWeb. All rights reserved.</p>
            </div>

            <div class="footer-column">
                <h3>Kontak</h3>
                <p><a href="mailto:tngmerapi.id@gmail.com">tngmerapi.id@gmail.com</a></p>
                <p>+62 888 0490 1667</p>
            </div>

            <div class="footer-column">
                <h3>Alamat</h3>
                <p>Dusun 2, Suroteleng, Kec. Selo, Kabupaten Boyolali, Jawa Tengah</p>
            </div>
        </div>
    </footer>

    <script>
        // FUNGSI JAVASCRIPT 
        function login(event) { //fungsi Login 
            event.preventDefault(); //mencegah form otomatis 

            const email = document.getElementById("email").value.trim(); //mengambil email
            const password = document.getElementById("password").value.trim(); //mengambil password

            if (email === "" || password === "") { //validasi input kosong 
                alert("Email dan password tidak boleh kosong!");
                return;
            }

            // Validasi sederhana 
            if (email && password) {
                const username = email.split("@")[0];
                localStorage.setItem("loggedInUser", username);
                alert("Login Berhasil!");
                document.getElementById('loginModal').style.display = "none";
                location.reload();
            } else {
                alert("Email atau password salah! Gunakan: user@gmail.com | 12345");
            }
        }

        function handleContactFormSubmit(e) {
            e.preventDefault(); // mencegah reload halaman 
            const loggedInUser = localStorage.getItem("loggedInUser"); //mengecek data user di Localstorage
            const loginModal = document.getElementById('loginModal');

            if (!loggedInUser) {
                alert("Anda harus login terlebih dahulu untuk mengirim pesan!");
                loginModal.style.display = 'flex'; // Tampilkan modal login
                return; 
            }

            // Jika sudah login, lanjut proses pengiriman pesan
            const name = document.getElementById('name').value; 
            const message = document.getElementById('message').value;

            // Validasi sederhana form
            if (name.trim() === "" || message.trim() === "") { 
                alert("Nama dan Pesan harus diisi.");
                return;
            }

            // Pesan berhasil
            alert(`Pesan dari ${name} berhasil dikirim! Terima kasih.`);
            e.target.reset();
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Deklarasi Elemen
            const body = document.body; 
            const toggleButton = document.getElementById('darkModeToggle'); 
            const loginModal = document.getElementById('loginModal');
            const loginBtn = document.getElementById('openLogin'); 
            const logoutBtn = document.getElementById("logoutBtn");
            const userNameSpan = document.getElementById("userName");
            const closeLogin = document.querySelector('.close-login');
            const contactForm = document.getElementById('contactForm');

            // --- 1. FITUR DARK MODE ---
            function applyDarkMode(isDark) {
                if (isDark) {
                    body.classList.add('dark-mode');
                    toggleButton.textContent = 'Light Mode';
                    localStorage.setItem('darkMode', 'enabled');
                } else {
                    body.classList.remove('dark-mode');
                    toggleButton.textContent = 'Dark Mode';
                    localStorage.setItem('darkMode', 'disabled');
                }
            }

            const isDarkMode = localStorage.getItem('darkMode') === 'enabled';
            applyDarkMode(isDarkMode);

            toggleButton.addEventListener('click', () => {
                const isCurrentlyDark = body.classList.contains('dark-mode');
                applyDarkMode(!isCurrentlyDark);
            });

            // --- 2. LOGIN / LOGOUT ---
            const loggedInUser = localStorage.getItem("loggedInUser");

            if (loggedInUser) {
                loginBtn.style.display = "none";
                logoutBtn.style.display = "inline-block";
                userNameSpan.style.display = "inline-block";
                userNameSpan.textContent = `Halo, ${loggedInUser}`;
            } else {
                loginBtn.style.display = "inline-block";
                logoutBtn.style.display = "none";
                userNameSpan.style.display = "none";
            }

            // --- 3. FITUR LOGOUT ---
            logoutBtn.addEventListener("click", () => {
                localStorage.removeItem("loggedInUser");
                alert("Anda telah logout!");
                location.reload();
            });

            // --- 4. MODAL LOGIN (Buka/Tutup) ---
            loginBtn.addEventListener('click', () => {
                loginModal.style.display = 'flex';
            });

            closeLogin.addEventListener('click', () => {
                loginModal.style.display = 'none';
            });

            window.addEventListener('click', (e) => {
                if (e.target === loginModal) {
                    loginModal.style.display = 'none';
                }
            });
            contactForm.addEventListener('submit', handleContactFormSubmit);
        });
    </script>
</body>
</html>